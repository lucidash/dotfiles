# 동영상 분석 스킬

동영상 파일에서 프레임을 추출하고, 추출된 이미지를 분석하여 문제 상황을 인지합니다.

## 입력 정보

$ARGUMENTS

## 작업 지침

### 1단계: 입력 파싱

사용자 입력에서 다음 정보를 추출하세요:
- `video_path`: 동영상 파일 경로 (필수)
- `resolution`: 해상도 옵션 (선택, 기본값: fhd)
  - `hd`: 1280px 너비
  - `fhd`: 1920px 너비
  - `original`: 원본 해상도 유지
- `fps`: 초당 프레임 수 (선택, 기본값: 1)
- `context`: 추가 컨텍스트 정보 (선택, 예: "Admin 화면", "결제 오류" 등)

### 2단계: 프레임 추출

1. **경로 처리**:
   - 상대 경로인 경우 현재 작업 디렉토리 기준으로 절대 경로로 변환
   - 동영상 파일 존재 여부 확인

2. **출력 디렉토리 생성**:
   - scratchpad 디렉토리에 `frames_<timestamp>` 폴더 생성
   - 예: `/private/tmp/claude/.../scratchpad/frames_1234567890`

3. **ffmpeg 명령어 실행**:
   ```bash
   ffmpeg -i <video_path> -vf "fps=<fps>[,scale=<width>:-1]" <output_dir>/frame_%04d.png -y
   ```

   해상도별 scale 옵션:
   - `hd`: `scale=1280:-1`
   - `fhd`: `scale=1920:-1`
   - `original`: scale 옵션 생략

### 3단계: 프레임 분석

1. **추출된 모든 프레임 읽기**:
   - Read 도구를 사용하여 모든 PNG 파일 읽기
   - 가능하면 병렬로 여러 이미지 읽기

2. **시퀀스 분석**:
   - 각 프레임에서 보이는 UI 요소, 텍스트, 상태 파악
   - 프레임 간 변화 추적 (사용자 액션, 화면 전환 등)
   - 오류 메시지, 예외 상황, 비정상 동작 감지

3. **문제 상황 인지**:
   - 에러 화면 (404, 500, 빈 화면 등)
   - UI 깨짐, 레이아웃 문제
   - 기능 오동작 (버튼 클릭 후 예상과 다른 결과)
   - 데이터 표시 오류

### 4단계: 분석 결과 보고

다음 형식으로 결과를 보고하세요:

```
## 동영상 분석 결과

### 동영상 정보
- 파일: <video_path>
- 추출 프레임: <N>개
- 해상도: <resolution>
- FPS: <fps>

### 시나리오 흐름
| 프레임 | 화면 | 설명 |
|--------|------|------|
| 1 | ... | ... |
| 2 | ... | ... |

### 감지된 문제
- **문제 유형**: (404 에러 / UI 버그 / 기능 오류 등)
- **발생 시점**: 프레임 N에서 발생
- **상세 설명**: ...
- **추정 원인**: ...

### 관련 정보 (있는 경우)
- 에러 메시지: ...
- 관련 URL/경로: ...
- 관련 데이터: ...
```

### 5단계: 정리

분석 완료 후 추출된 프레임 디렉토리 삭제:
```bash
rm -rf <output_dir>
```

## 입력 예시

```
/path/to/video.mp4
./bug-recording.mov hd fps=0.5
~/Downloads/error.mov context="결제 화면에서 오류 발생"
```

## 주의사항

- 동영상이 길 경우 fps를 낮춰 프레임 수 조절 (기본 1fps)
- 화면 녹화 영상은 주로 UI/UX 문제 분석에 적합
- 분석 후 임시 파일은 반드시 정리
