---
name: resolve-review
description: PR ë¦¬ë·° í”¼ë“œë°±ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. "ë¦¬ë·° ë°˜ì˜í•´ì¤˜", "í”¼ë“œë°± ì²˜ë¦¬í•´ì¤˜", "change request í•´ê²°í•´ì¤˜" ê°™ì€ ìš”ì²­ì— ìë™ìœ¼ë¡œ í™œì„±í™”ë©ë‹ˆë‹¤.
argument-hint: "[-i | --interactive] [PRë²ˆí˜¸ ë˜ëŠ” URL]"
allowed-tools: Bash, Glob, Grep, Read, Edit, Write, AskUserQuestion
---

# PR Review Resolver

PRì˜ ë¦¬ë·° ì½”ë©˜íŠ¸ë¥¼ ë¶„ì„í•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤.

**Arguments:** `$ARGUMENTS`

## ëª¨ë“œ ì„ íƒ

Argumentsì—ì„œ ì˜µì…˜ì„ íŒŒì‹±í•©ë‹ˆë‹¤:

- `--interactive` ë˜ëŠ” `-i`: **Interactive Mode** - ê° ì½”ë©˜íŠ¸ë¥¼ í•˜ë‚˜ì”© í™•ì¸
- ì˜µì…˜ ì—†ìŒ: **Batch Mode** - ëª¨ë“  ì½”ë©˜íŠ¸ë¥¼ í•œë²ˆì— ì²˜ë¦¬

---

## ê³µí†µ: PR ì •ë³´ ì¡°íšŒ

### 1. ë ˆí¬ ë° PR ìë™ ê°ì§€

```bash
# í˜„ì¬ ë ˆí¬ ì •ë³´
repo=$(command gh repo view --json nameWithOwner --jq '.nameWithOwner')
owner=$(echo $repo | cut -d'/' -f1)
repo_name=$(echo $repo | cut -d'/' -f2)

# PR ë²ˆí˜¸ (ì¸ìê°€ ì—†ìœ¼ë©´ í˜„ì¬ ë¸Œëœì¹˜ì—ì„œ ê°ì§€)
pr_number=$(command gh pr view --json number --jq '.number')
```

### 2. í”„ë¡œì íŠ¸ ê°€ì´ë“œ ë¬¸ì„œ ì°¸ì¡°

```bash
# CLAUDE.md ì¡°íšŒ (main ë¸Œëœì¹˜)
command gh api repos/{owner}/{repo}/contents/CLAUDE.md?ref=main \
  --jq '.content' | base64 -d
```

### 3. ë¦¬ë·° ì½”ë©˜íŠ¸ ì¡°íšŒ

```bash
# ë¦¬ë·° ìŠ¤ë ˆë“œ ì¡°íšŒ (GraphQL - resolved ìƒíƒœ í¬í•¨)
command gh api graphql -f query='
query($owner: String!, $repo: String!, $pr: Int!) {
  repository(owner: $owner, name: $repo) {
    pullRequest(number: $pr) {
      reviewThreads(first: 100) {
        nodes {
          id
          isResolved
          path
          line
          comments(first: 10) {
            nodes {
              id
              body
              author { login }
            }
          }
        }
      }
    }
  }
}' -f owner={owner} -f repo={repo} -F pr={pr_number}
```

### 4. ì½”ë©˜íŠ¸ ë¶„ë¥˜

Priority ìˆœìœ¼ë¡œ ì •ë ¬:
- **P1 (Critical)**: ë²„ê·¸, ë³´ì•ˆ ì´ìŠˆ, ëŸ°íƒ€ì„ ì˜¤ë¥˜
- **P2 (Major)**: ì»¨ë²¤ì…˜ ìœ„ë°˜, ì„±ëŠ¥ ì´ìŠˆ
- **P3 (Minor)**: ì½”ë“œ ìŠ¤íƒ€ì¼, ê°€ë…ì„±
- **P4 (Info)**: ì°¸ê³ ì‚¬í•­, ì§ˆë¬¸

---

## Batch Mode (ê¸°ë³¸)

ëª¨ë“  ì½”ë©˜íŠ¸ë¥¼ Priority ìˆœì„œë¡œ ì¼ê´„ ì²˜ë¦¬:

1. í•´ë‹¹ íŒŒì¼ ì½ê¸°
2. ì½”ë©˜íŠ¸ ë‚´ìš©ì— ë”°ë¼ ì½”ë“œ ìˆ˜ì •
3. ìˆ˜ì • ì™„ë£Œ í›„ ë‹¤ìŒ ì½”ë©˜íŠ¸ë¡œ

### ì½”ë“œ ìˆ˜ì • ë° ì»¤ë°‹

```bash
# 1. ì½”ë“œ ìˆ˜ì • (Edit ë„êµ¬ ì‚¬ìš©)

# 2. íƒ€ì… ì²´í¬ ë° ë¦°íŠ¸
npm run check && npm run lint

# 3. ì»¤ë°‹ ë° í‘¸ì‹œ
git add {modified_files}
git commit -m "fix: ë¦¬ë·° í”¼ë“œë°± ë°˜ì˜ - {ê°„ëµ ì„¤ëª…}

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
git push
```

### ê²°ê³¼ ìš”ì•½

```markdown
## ë¦¬ë·° ì²˜ë¦¬ ê²°ê³¼

### ì²˜ë¦¬ëœ ì½”ë©˜íŠ¸
| Priority | íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|----------|------|-----------|
| P2 | src/foo.ts:42 | moment â†’ dayjs êµì²´ |

### ë³€ê²½ëœ íŒŒì¼
- src/foo.ts

### ë‹¤ìŒ ë‹¨ê³„
1. `npm run build` (í•„ìš”ì‹œ)
2. `npm run lint:prod`
```

---

## Interactive Mode (`-i`, `--interactive`)

ê° ì½”ë©˜íŠ¸ë¥¼ í•˜ë‚˜ì”© í™•ì¸í•˜ë©° ì²˜ë¦¬í•©ë‹ˆë‹¤.

### ê° ì½”ë©˜íŠ¸ í‘œì‹œ í˜•ì‹

```markdown
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
## [1/12] @{reviewer} - {priority}
**íŒŒì¼:** `{path}:{line}`
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{comment body}

### ì œì•ˆ ì½”ë“œ (ìˆëŠ” ê²½ìš°)
```diff
- old code
+ new code
```
```

### ì„ íƒì§€ ì œê³µ

**AskUserQuestion ë„êµ¬**ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ íƒì§€ ì œê³µ:

| ì˜µì…˜ | ì„¤ëª… |
|------|------|
| **ì ìš©** | ì œì•ˆëœ ë³€ê²½ì‚¬í•­ ê·¸ëŒ€ë¡œ ì ìš© |
| **ìˆ˜ì • ì ìš©** | ì˜ë„ë¥¼ ë°˜ì˜í•˜ì—¬ ì ì ˆíˆ ìˆ˜ì • í›„ ì ìš© |
| **ìŠ¤í‚µ** | ì´ ì½”ë©˜íŠ¸ ê±´ë„ˆë›°ê¸° |
| **ëª¨ë‘ ì ìš©** | ë‚¨ì€ ëª¨ë“  ì½”ë©˜íŠ¸ Batchë¡œ ìë™ ì ìš© |
| **ì¢…ë£Œ** | ì²˜ë¦¬ ì¤‘ë‹¨í•˜ê³  ìš”ì•½ ë³´ê¸° |

### ì„ íƒì— ë”°ë¥¸ ì²˜ë¦¬

#### ì ìš© (Apply)
- ì œì•ˆëœ ì½”ë“œ ë³€ê²½ì´ ìˆìœ¼ë©´ í•´ë‹¹ íŒŒì¼ì˜ í•´ë‹¹ ë¼ì¸ì„ ìˆ˜ì •
- Edit ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •í™•í•œ ìœ„ì¹˜ì— ë³€ê²½ ì ìš©

#### ìˆ˜ì • ì ìš© (Modify & Apply)
- í•´ë‹¹ íŒŒì¼ì˜ ê´€ë ¨ ì½”ë“œë¥¼ ì½ì–´ì„œ ì»¨í…ìŠ¤íŠ¸ íŒŒì•…
- ì½”ë©˜íŠ¸ ì˜ë„ë¥¼ ë°˜ì˜í•˜ì—¬ ì ì ˆí•œ ìˆ˜ì •ì•ˆ ì œì•ˆ
- ì ìš© í›„ ë‹¤ìŒ ì½”ë©˜íŠ¸ë¡œ

#### ìŠ¤í‚µ (Skip)
- í•´ë‹¹ ì½”ë©˜íŠ¸ë¥¼ "skipped" ëª©ë¡ì— ì¶”ê°€
- ë‹¤ìŒ ì½”ë©˜íŠ¸ë¡œ ì§„í–‰

#### ëª¨ë‘ ì ìš© (Apply All)
- Interactive ëª¨ë“œ ì¢…ë£Œ
- ë‚¨ì€ ì½”ë©˜íŠ¸ë¥¼ Batch ëª¨ë“œë¡œ ìë™ ì²˜ë¦¬

#### ì¢…ë£Œ (Exit)
- í˜„ì¬ê¹Œì§€ì˜ ì²˜ë¦¬ ê²°ê³¼ ìš”ì•½
- ë‚¨ì€ ì½”ë©˜íŠ¸ ëª©ë¡ í‘œì‹œ

### ì§„í–‰ ìƒí™© í‘œì‹œ

```
[=====>    ] 5/12 ì™„ë£Œ | ì ìš©: 3 | ìŠ¤í‚µ: 1 | ìˆ˜ì •: 1
```

### ìµœì¢… ìš”ì•½

```markdown
## Interactive Review ì™„ë£Œ

### ì²˜ë¦¬ ê²°ê³¼
- ì ìš©: 5ê°œ
- ìˆ˜ì • ì ìš©: 2ê°œ
- ìŠ¤í‚µ: 3ê°œ
- ë¯¸ì²˜ë¦¬: 2ê°œ

### ë³€ê²½ëœ íŒŒì¼
1. src/foo.ts (2 changes)
2. src/bar.ts (1 change)

### ë¹Œë“œ í™•ì¸ í•„ìš”
npm run build && npm run lint:prod
```

---

## ì½”ë©˜íŠ¸ ë‹µê¸€ ë‹¬ê¸° (í•„ìˆ˜!)

> âš ï¸ **ì¤‘ìš”**: ëª¨ë“  ë¦¬ë·° ì½”ë©˜íŠ¸ì—ëŠ” ë°˜ë“œì‹œ ë‹µê¸€ì„ ë‹¬ì•„ì•¼ í•©ë‹ˆë‹¤!
> - ë°˜ì˜í•œ ê²½ìš°: ë¬´ì—‡ì„ ì–´ë–»ê²Œ ìˆ˜ì •í–ˆëŠ”ì§€ ë‹µê¸€ + resolve
> - ë°˜ì˜í•˜ì§€ ì•Šì€ ê²½ìš°: **ë°˜ë“œì‹œ** ê·¸ ì´ìœ ë¥¼ ë‹µê¸€ë¡œ ì„¤ëª… (resolve í•˜ì§€ ì•ŠìŒ)

### GraphQL Mutation ì‚¬ìš© (REST APIëŠ” ID í˜¸í™˜ ë¬¸ì œë¡œ ì‚¬ìš© ë¶ˆê°€)

```bash
# ìˆ˜ì • ì™„ë£Œ ì‹œ â†’ ë‹µê¸€ + resolve
command gh api graphql -f query='
mutation($body: String!, $threadId: ID!) {
  addPullRequestReviewThreadReply(input: {
    body: $body,
    pullRequestReviewThreadId: $threadId
  }) {
    comment { id }
  }
}' -f body="ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. {ë³€ê²½ ë‚´ìš© ìš”ì•½}" -f threadId="{THREAD_ID}"

# ì´í›„ resolve
command gh api graphql -f query='
mutation($threadId: ID!) {
  resolveReviewThread(input: {threadId: $threadId}) {
    thread { isResolved }
  }
}' -f threadId="{THREAD_ID}"
```

```bash
# ë°˜ì˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° â†’ ë°˜ë“œì‹œ ì‚¬ìœ  ë‹µê¸€ (resolve í•˜ì§€ ì•ŠìŒ!)
command gh api graphql -f query='
mutation($body: String!, $threadId: ID!) {
  addPullRequestReviewThreadReply(input: {
    body: $body,
    pullRequestReviewThreadId: $threadId
  }) {
    comment { id }
  }
}' -f body="ë°˜ì˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. {êµ¬ì²´ì ì¸ ì‚¬ìœ }" -f threadId="{THREAD_ID}"
```

**ì£¼ì˜ì‚¬í•­**:
- Thread IDëŠ” `PRRT_` ì ‘ë‘ì‚¬ë¡œ ì‹œì‘í•˜ëŠ” GraphQL ID ì‚¬ìš©
- REST APIì˜ `/pulls/comments/{id}/replies`ëŠ” GraphQL IDì™€ í˜¸í™˜ë˜ì§€ ì•ŠìŒ
- ë°˜ì˜í•˜ì§€ ì•ŠëŠ” ë¦¬ë·°ì— ë‹µê¸€ ì—†ì´ ë„˜ì–´ê°€ë©´ ì•ˆ ë¨!

## ìë™ Resolve ëŒ€ìƒ

CIì—ì„œ ê²€ì¦ë˜ëŠ” í•­ëª©ì€ ìë™ resolve:
- `locales/*.json` íŒŒì¼ì˜ ë²ˆì—­ ë¬¸ìì—´ ëˆ„ë½ (Lokalise ê´€ë¦¬)
- ë¦°íŠ¸/í¬ë§·íŒ… ê´€ë ¨ (CIì—ì„œ ìë™ ìˆ˜ì •)

## íŒ¨í„´ ë¶„ì„ ì—°ë™ (Confirm í•„ìˆ˜)

ë¦¬ë·° í”¼ë“œë°± ë°˜ì˜ ì¤‘ í”„ë¡œì íŠ¸ íŒ¨í„´ì´ ë¶ˆí™•ì‹¤í•  ë•Œ, **ì‚¬ìš©ì í™•ì¸ í›„** `analyze-repo-patterns` ìŠ¤í‚¬ì„ í˜¸ì¶œí•©ë‹ˆë‹¤.

### í˜¸ì¶œ ì‹œì 

- ë¦¬ë·°ì–´ê°€ "í”„ë¡œì íŠ¸ íŒ¨í„´ì„ ë”°ë¥´ë¼"ê³  í–ˆëŠ”ë° ì–´ë–¤ íŒ¨í„´ì¸ì§€ ë¶ˆí™•ì‹¤í•  ë•Œ
- ìˆ˜ì • ë°©í–¥ì´ ì—¬ëŸ¬ ê°€ì§€ì¼ ë•Œ í”„ë¡œì íŠ¸ í‘œì¤€ í™•ì¸ í•„ìš”
- ë°˜ë°• ì‹œ ê·¼ê±° ìë£Œê°€ í•„ìš”í•  ë•Œ

### 1ë‹¨ê³„: ì‚¬ìš©ì í™•ì¸ (AskUserQuestion)

íŒ¨í„´ í™•ì¸ì´ í•„ìš”í•˜ë‹¤ê³  íŒë‹¨ë˜ë©´, **ë¨¼ì € ì‚¬ìš©ìì—ê²Œ í™•ì¸**í•©ë‹ˆë‹¤:

```json
{
  "questions": [{
    "question": "'{íŒ¨í„´ëª…}' íŒ¨í„´ì˜ í”„ë¡œì íŠ¸ ì‚¬ìš©ë¡€ë¥¼ í™•ì¸í• ê¹Œìš”?",
    "header": "íŒ¨í„´ í™•ì¸",
    "options": [
      {"label": "í™•ì¸", "description": "í”„ë¡œì íŠ¸ ë‚´ ì‚¬ìš©ë¡€ì™€ ìµœê·¼ PR ë¶„ì„"},
      {"label": "ê±´ë„ˆë›°ê¸°", "description": "í™•ì¸ ì—†ì´ ì§„í–‰"}
    ],
    "multiSelect": false
  }]
}
```

### 2ë‹¨ê³„: ì¡°ê±´ë¶€ ì‹¤í–‰

- **"í™•ì¸"** ì„ íƒ ì‹œ â†’ Task ë„êµ¬ë¡œ íŒ¨í„´ ë¶„ì„ ì‹¤í–‰
- **"ê±´ë„ˆë›°ê¸°"** ì„ íƒ ì‹œ â†’ ë¶„ì„ ì—†ì´ í”¼ë“œë°± ì²˜ë¦¬ ê³„ì†

### 3ë‹¨ê³„: í˜¸ì¶œ ë°©ë²• (ìŠ¹ì¸ëœ ê²½ìš°ë§Œ)

```
Task ë„êµ¬ ì‚¬ìš©:
- subagent_type: "Explore"
- prompt: |
    analyze-repo-patterns ìŠ¤í‚¬ì„ ì‹¤í–‰í•˜ì—¬ '{íŒ¨í„´}' íŒ¨í„´ì„ ë¶„ì„í•´ì¤˜.
    - í˜„ì¬ ì½”ë“œë² ì´ìŠ¤ì—ì„œ ì‚¬ìš© í˜„í™©
    - ìµœê·¼ ë¨¸ì§€ëœ PRì—ì„œì˜ ì‚¬ìš©ë¡€
    - ê¶Œì¥ íŒ¨í„´ ê²°ë¡ 
```

### ì˜ˆì‹œ íë¦„

```
[resolve-review ì§„í–‰ ì¤‘...]

ë¦¬ë·°ì–´ ì½”ë©˜íŠ¸: "ì´ ë¶€ë¶„ì€ í”„ë¡œì íŠ¸ íŒ¨í„´ì— ë§ê²Œ ìˆ˜ì •í•´ì£¼ì„¸ìš”"

Claude: ë¦¬ë·°ì–´ê°€ í”„ë¡œì íŠ¸ íŒ¨í„´ì„ ë”°ë¥´ë¼ê³  í–ˆëŠ”ë°,
        ì •í™•í•œ íŒ¨í„´ì„ í™•ì¸í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 'useDialog' íŒ¨í„´ì˜ í”„ë¡œì íŠ¸ ì‚¬ìš©ë¡€ë¥¼    â”‚
        â”‚ í™•ì¸í• ê¹Œìš”?                              â”‚
        â”‚                                          â”‚
        â”‚  [í™•ì¸]  [ê±´ë„ˆë›°ê¸°]                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User: [í™•ì¸] í´ë¦­

Claude: [analyze-repo-patterns ì‹¤í–‰...]

        ë¶„ì„ ê²°ê³¼: useDialog composableì´ ê¶Œì¥ë©ë‹ˆë‹¤.
        ìµœê·¼ PR #1091ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ ì‚¬ìš©.

        [í•´ë‹¹ íŒ¨í„´ìœ¼ë¡œ ì½”ë“œ ìˆ˜ì •...]
```

### ë°˜ë°• ì‹œ í™œìš©

ë¶„ì„ ê²°ê³¼ ê¸°ì¡´ ì½”ë“œê°€ ì´ë¯¸ í”„ë¡œì íŠ¸ íŒ¨í„´ì„ ë”°ë¥´ê³  ìˆë‹¤ë©´, ê·¼ê±°ì™€ í•¨ê»˜ ë‹µê¸€:

```bash
command gh api graphql -f query='
mutation($body: String!, $threadId: ID!) {
  addPullRequestReviewThreadReply(input: {
    body: $body,
    pullRequestReviewThreadId: $threadId
  }) {
    comment { id }
  }
}' -f body="ë¶„ì„ ê²°ê³¼ í˜„ì¬ êµ¬í˜„ì´ í”„ë¡œì íŠ¸ íŒ¨í„´ê³¼ ì¼ì¹˜í•©ë‹ˆë‹¤.
- ë™ì¼ íŒ¨í„´ ì‚¬ìš© íŒŒì¼: 45ê°œ
- ì°¸ê³  PR: #1091, #1088
ê¸°ì¡´ ë°©ì‹ì„ ìœ ì§€í•©ë‹ˆë‹¤." -f threadId="{THREAD_ID}"
```

---

## ì£¼ì˜ì‚¬í•­

- CLAUDE.mdì˜ ì»¨ë²¤ì…˜ì„ ìš°ì„  ë”°ë¦„
- í”„ë¡œì íŠ¸ ì „ë°˜ì˜ ê¸°ì¡´ íŒ¨í„´ í™•ì¸ í›„ ì¼ê´€ì„± ìœ ì§€
- ìˆ˜ì • ì „ ë°˜ë“œì‹œ íƒ€ì… ì²´í¬/ë¦°íŠ¸ í†µê³¼ í™•ì¸
- **íŒ¨í„´ í™•ì¸ì´ í•„ìš”í•˜ë©´ analyze-repo-patterns ìŠ¤í‚¬ì„ í˜¸ì¶œí•  ê²ƒ (ì‚¬ìš©ì confirm í•„ìˆ˜)**

### âš ï¸ ë¦¬ë·° ë‹µê¸€ í•„ìˆ˜ ê·œì¹™

| ìƒí™© | í•„ìˆ˜ í–‰ë™ |
|------|----------|
| ì œì•ˆ ìˆ˜ë½/ë°˜ì˜ | ë‹µê¸€ ë‹¬ê¸° ("ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. {ë‚´ìš©}") + **resolve** |
| ì œì•ˆ ê±°ì ˆ/ë¯¸ë°˜ì˜ | **ë°˜ë“œì‹œ** ë‹µê¸€ë¡œ ì‚¬ìœ  ì„¤ëª… + resolve í•˜ì§€ ì•ŠìŒ |
| ë‚˜ì¤‘ì— ì²˜ë¦¬ ì˜ˆì • | ë‹µê¸€ ë‹¬ê¸° ("ë³„ë„ ì‘ì—…ìœ¼ë¡œ ì§„í–‰ ì˜ˆì •ì…ë‹ˆë‹¤. {ì‚¬ìœ }") |

> ğŸš« **ê¸ˆì§€**: ë¦¬ë·° ì½”ë©˜íŠ¸ë¥¼ ë‹µê¸€ ì—†ì´ ë¬´ì‹œí•˜ê±°ë‚˜, ì‚¬ìœ  ì„¤ëª… ì—†ì´ resolve í•˜ëŠ” ê²ƒ

## Usage

```bash
# Batch Mode (ê¸°ë³¸)
/resolve-review
/resolve-review 123

# Interactive Mode
/resolve-review -i
/resolve-review --interactive 123
/resolve-review -i https://github.com/org/repo/pull/123
```
